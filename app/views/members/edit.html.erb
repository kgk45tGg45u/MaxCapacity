<div class="users-container">
    <div class="form-new my-4 p-4">
        <h1 class="mt-5">Edit <%= @member.name %>'s Profile</h1>
        <%= simple_form_for @member, html: {data: {controller: "photo-preview"}} do |f|%>
        <% if @member.photo.attached? %>
        <img class="member-avatar" src="<%= cl_image_path(@member.photo.key) %>" alt="Member Avatar", data: (photo_preview_target: "preview") >
      <% else %>
        <%= image_tag "Avatar.jpg", class:"member-avatar" %>
      <% end %>
          <%= f.input :photo, as: :file, input_html: { class: 'd-none', data: { photo_preview_target: "input", action:"change->photo-preview#displayPreview" }}, label_html: { class: 'upload-photo'}, label: 'ðŸ“· Upload a photo'%>
          <h2 class="form-heading text-left">Name</h2>
            <%= f.input :name, label_html: {class: 'member_input'}, label: false %>
          <h2 class="form-heading">Role</h2>
            <%= f.input :title, label_html: {class: 'member_input'}, label: false %>
          <h2 class="form-heading">Email</h2>
          <%= f.input :email, label_html: {class: 'member_input'}, label: false %>
          <h2 class="form-heading">Line Manager</h2>
          <%= f.input :line_manager, label_html: {class: 'member_input'}, label: false %>
            <h2 class="form-heading">Team Member Capacity (hours)</h2>
          <%= f.input :capacity, label_html: {class: 'member_input'}, label: false %>
          <div class="select-member">
            <%= f.input :project_ids, label: false , as: :check_boxes, collection: Project.all, include_blank: false, include_hidden: false, input_html: { multiple: true, class: "team-member-select" }, item_wrapper_class: 'member-item'%>
          </div>
          <%= link_to "Delete #{@member.name} from MaxCapacity", member_path(@member), class: "btn button-delete mtb-5",
            data: {turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this member?"} %>
          <div class="button-right-corner">
            <%= f.submit 'Save', class: 'btn button-save'%>
          </div>
        <% end %>
  </div>
</div>
